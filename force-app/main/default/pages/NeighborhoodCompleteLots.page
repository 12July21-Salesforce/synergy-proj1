<apex:page controller="NeighborhoodCompleteLots_CC" lightningStylesheets="true">
    
    <!-- Page Title -->
    <apex:pageBlock title="Homes Available">
        
        
        <!-- repeat for each neighborhood -->
        <apex:repeat value="{!neighborhoods}" var="hood"> 
            
            <!-- Neighborhood Title -->
            <apex:pageBlockSection title="{!hood.Name}" columns="1"> <!-- TODO: Add string literal 'Neighborhood: ' -->
                
                <!-- Neighborhood Details -->
                <apex:pageBlockSection title="Neighborhood Details" collapsible="false" showHeader="false" columns="1">
                    
                    <apex:variable var="v" value="{!hood}" />
                    <apex:pageBlockSectionItem >
                        <span style="font-weight: bold">Neighbor Details</span> <br/>
                        <span>Status:     {!v.Status__c}</span> <br/>
                        <span>City:     {!v.City__c}</span> <br/>
                        <span>State:     {!v.State__c}</span> <br/>
                        <span>Zip Code:     {!v.Zip_Code__c}</span> <br/>
                    </apex:pageBlockSectionItem>
                    
                </apex:pageBlockSection>
                
                
                <!-- Put all children lots in a table-->    
                <apex:pageBlockTable value="{!hood.Lots__r}" var="lot"> 
                    
                    <apex:column value="{!lot.Name}"/>
                    
                    <!-- TODO: Update this after formula fied is added to the Lot object-->
                    <apex:column headerValue="Current Image">

                        <apex:variable var="imagePath" value="{!imageName}" />
                        <apex:image url="{!URLFOR($Resource.houseImages, imagePath)}" width="100" height="100"/>
                    </apex:column>
                    
                    <!-- FOR TESTING PURPOSES ONLY -->
                    <apex:column value="{!lot.Home_Type__c}" />
                        
                    
                </apex:pageBlockTable> 
            </apex:pageBlockSection> 
        </apex:repeat>
    </apex:pageBlock>                                                                                               
</apex:page>